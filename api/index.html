<？PHPN//获取句子文件的绝对路径n//如果你介意别人可能会拖走这个文本，可以把文件名(hitokoto.txt)进行自定义一下，或者通过nginx禁止拉取也行.N$path=dirname(__File__)；n$file=file($path)。“/hitokoto.txt”；n//随机读取一行n$arr=mt_rand(0，count($file)-1)；n$编码判断，用于输出相应的响应头部编码=trim($file[$arr])；n//编码判断，用于输出相应的响应头部编码nif(isset($_get[‘charset’])&！空($_get[‘charset’)){n$charset=$_get[‘charset’]；N if(strcasecmp($charset，“GBK”)==0){n$content=mb_cr_coding($Content，‘GBK’，‘utf-8’)；n}n}{n$charset=‘utf-8’；n}n头(“内容-类型：text/json；charset=$charset”)；N//格式化判断，输出js或纯文本nif($_GET[‘Format’]==‘js’){necho“函数hitokoto(){document.write(‘’)。$Content。“‘)；}”；n}°{n$Date=Date(“Y-m-d-h：i：s”)；n回声’{“数据”：{“内容”：{“id”：‘。$arr‘，“内容”：“.$content.”，“Created_at”：“’.$date.‘”，“updated_at”：“’.$date.‘}”}，“状态”：1，“msg”：“毒汤数据获取成功！”}；n}
